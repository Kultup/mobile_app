# Країна Мрій - Mobile App

Мобільний додаток для системи навчання персоналу ресторану "Країна Мрій".

## Технологічний стек

- **React Native** 0.76.0
- **TypeScript**
- **React Navigation** - навігація
- **React Query** (@tanstack/react-query) - кешування та синхронізація даних
- **React Native Paper** - UI компоненти
- **Axios** - HTTP клієнт
- **AsyncStorage** - локальне зберігання
- **Firebase Cloud Messaging** - push-повідомлення
- **React Native Video** - відеоплеєр
- **React Native Fast Image** - оптимізоване відображення зображень

## Передумови

- Node.js >= 18
- npm або yarn
- React Native CLI
- Xcode (для iOS)
- Android Studio (для Android)
- CocoaPods (для iOS)

## Встановлення

1. Встановіть залежності:
```bash
npm install
# або
yarn install
```

2. Для iOS встановіть CocoaPods залежності:
```bash
cd ios && pod install && cd ..
```

3. Налаштуйте Firebase:
   - Створіть Firebase проект
   - Додайте `google-services.json` в `android/app/`
   - Додайте `GoogleService-Info.plist` в `ios/`

4. Налаштуйте API URL:
   - Відредагуйте `src/constants/config.ts`
   - Встановіть правильний `API_BASE_URL`

## Запуск

### iOS
```bash
npm run ios
# або
yarn ios
```

### Android
```bash
npm run android
# або
yarn android
```

### Metro Bundler
```bash
npm start
# або
yarn start
```

## Структура проекту

```
mobile/
├── src/
│   ├── screens/          # Екрани додатку
│   │   ├── auth/         # Авторизація
│   │   ├── home/         # Головний екран
│   │   ├── test/         # Проходження тесту
│   │   ├── knowledge-base/ # База знань
│   │   ├── rating/       # Рейтинг
│   │   ├── statistics/  # Статистика
│   │   ├── feedback/     # Зворотний зв'язок
│   │   ├── achievements/ # Ачівки
│   │   ├── shop/         # Магазин
│   │   └── profile/      # Профіль
│   ├── components/       # Переіспользувані компоненти
│   ├── navigation/      # Навігація
│   ├── services/         # API сервіси
│   ├── hooks/            # Custom hooks
│   ├── utils/            # Утиліти
│   ├── types/            # TypeScript типи
│   ├── constants/        # Константи
│   └── contexts/         # React Contexts
├── android/              # Android налаштування
├── ios/                  # iOS налаштування
└── App.tsx               # Головний компонент
```

## Основні функції

### ✅ Реалізовано:

- **Авторизація та реєстрація**
  - Вхід за ПІБ, містом, посадою
  - Реєстрація нового користувача
  - Автоматичне збереження токену
  - Автоматичний refresh токенів

- **Головний екран**
  - Відображення щоденного тесту
  - Статистика користувача
  - Швидкий доступ до функцій

- **Проходження тесту**
  - Відображення питань по одному
  - Підтримка фото та відео до питань
  - Автоматичний вибір якості відео
  - Відображення результатів

- **База знань**
  - Список статей з пошуком
  - Фільтрація по категоріях
  - Перегляд статей (текст, зображення, PDF)

- **Рейтинг**
  - Глобальний рейтинг
  - Рейтинг за містом
  - Рейтинг за посадою
  - Підсвітка поточного користувача

- **Статистика**
  - Загальна статистика
  - Графік прогресу за останні 7 днів
  - Історія тестів

- **Зворотний зв'язок**
  - Опитування (рейтинг, текст, множинний вибір)
  - Пропозиції питань
  - Звіти про помилки

- **Ачівки**
  - Список всіх ачівок
  - Прогрес до кожної ачівки
  - Статистика ачівок

- **Магазин**
  - Каталог товарів
  - Покупка товарів за бали
  - Застосування товарів (аватарки, рамки, бейджі)
  - Історія покупок

- **Профіль**
  - Відображення інформації користувача
  - Редагування профілю
  - Вибір активних товарів
  - Вихід з акаунту

- **Push-повідомлення**
  - Реєстрація FCM токену
  - Обробка foreground та background повідомлень
  - Навігація при кліку на повідомлення

## UI/UX компоненти

- **Toast повідомлення** - швидкі повідомлення без блокування інтерфілю
- **Skeleton Loaders** - візуальні індикатори завантаження
- **Адаптивні розміри** - підтримка різних розмірів екранів
- **Safe Area View** - підтримка вирізів (notch, Dynamic Island)

## Адаптивність

Додаток використовує адаптивні функції для підтримки різних розмірів екранів:

- `rp(size)` - адаптивні padding/margin
- `wp(percentage)` - адаптивна ширина у відсотках
- `hp(percentage)` - адаптивна висота у відсотках
- `rf(size)` - адаптивний розмір шрифту
- `scale(size)` - масштабування розміру

Базові розміри: iPhone 11 Pro (375x812)

## API інтеграція

Базовий URL: налаштовується в `src/constants/config.ts`

Основні endpoints:
- `/auth/login` - вхід
- `/auth/register` - реєстрація
- `/tests/daily` - щоденний тест
- `/tests/:id/answer` - відповідь на питання
- `/tests/:id/complete` - завершити тест
- `/knowledge-base/articles` - статті
- `/ratings/global` - глобальний рейтинг
- `/user/statistics` - статистика користувача
- `/shop/products` - товари магазину
- `/shop/purchase` - покупка товару
- `/achievements` - ачівки

## Налаштування

### Конфігурація API

Відредагуйте `src/constants/config.ts`:

```typescript
export const API_BASE_URL = __DEV__
  ? 'http://localhost:3000/api/v1'
  : 'https://api.kraina-mriy.com/api/v1';
```

### Firebase налаштування

1. Створіть Firebase проект
2. Додайте Android app та iOS app
3. Завантажте конфігураційні файли:
   - `google-services.json` → `android/app/`
   - `GoogleService-Info.plist` → `ios/`

## Тестування

```bash
npm test
# або
yarn test
```

## Побудова для production

### Android

```bash
cd android
./gradlew assembleRelease
```

### iOS

1. Відкрийте `ios/KrainaMriy.xcworkspace` в Xcode
2. Виберіть схему "Release"
3. Product → Archive

## Відомі проблеми та обмеження

- Офлайн-режим ще не реалізовано (планується)
- Анімації отримання ачівок (опційно)
- Темна тема (опційно)

## Розробка

### Додавання нового екрану

1. Створіть файл в `src/screens/[category]/[ScreenName].tsx`
2. Додайте навігацію в `src/navigation/AppNavigator.tsx`
3. Додайте типи в `src/types/index.ts` (якщо потрібно)
4. Створіть сервіс в `src/services/` (якщо потрібно)

### Додавання нового компонента

1. Створіть файл в `src/components/[ComponentName].tsx`
2. Використовуйте адаптивні функції (`rp`, `wp`, `hp`)
3. Додайте TypeScript типи

### API сервіси

Всі API виклики виконуються через сервіси в `src/services/`. Використовуйте `api.ts` для базових запитів.

## Ліцензія

Приватний проект для ресторану "Країна Мрій"

## Контакти

Для питань та підтримки звертайтеся до команди розробки.
